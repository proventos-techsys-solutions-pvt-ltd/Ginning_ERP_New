<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	 <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../styles/bootstrap.min.css">
	<link rel="stylesheet" href="../styles/admin/sidenav.css">
<title>अमानत पावती</title>
<style>
body{
	font-size:.9rem;
	line-height:1.5rem;
	padding: 5px;
}

h4,h5,h6{
	line-height:1.5rem;
}
	.report{
		padding-right: 0px;
		padding-left: 0px;
		border:1px solid black;
	}
	.remove-row-margin{
		margin-left: 0px;
		margin-right: 0px;
		padding:15px;
	}
	.sign-box{
		height:100px;
		width:100px;
		border-radius:5px;
		border:1px solid black;
	}
	.form-border{
		border:1px solid black;
	}
</style>
</head>
<body>
<div class="container report ">
	<div class="form-border">
	<div class="row remove-row-margin row-background">
		<div class="col-md-12">
			<h4 class="text-center">अमानत पावती</h4>
		</div>
	</div>
	<div class="row remove-row-margin row-background">
		<div class="col-md-6">
			<label>अनु क्रं</label>
			<div>
				<label>दिनांक</label>
				<span id='amanatDate'>dd/mm/yyyy</span>
			</div>
		</div>
		<div class="col-md-6 text-right">
			<img src="../property/img/logo.png" alt="logo" width=300px; height=80px;>
		</div>
	</div>
	<div  class="row remove-row-margin row-background">
		<div class="col-md-12">
			<h4 class="text-center">समीर कॉटन इंडस्ट्रीज प्रा. लिमि.</h4>
			<h6 class="text-center">
				फैक्ट्री : सर्वे नंबर २१२/१, मौज़ा-गोन्हि, सावनेर रोड, घुबडमेट, तहसील काटोल जिल्हा नागपुर-४४१३०२
			</h6>
			<h6 class="text-center">
				मो ९११२९८७७५८, ९६५७८९२७१८, ईमेल - info@samirgroup.co.in । www.samirgroup.co.in  
			</h6>
		</div>
	</div>
	<div class="row remove-row-margin row-background">
		<div class="col-md-12 d-flex justify-content-start align-items-center">
			<label><b>शेतकऱ्यांचे नाव:	 </b></label>
			<label class="ml-2"><span id='vendorName'>पूत योर नाम हेरे</span></label>
		</div>
	</div>
	<div class="row remove-row-margin row-background">
		<div class="col-md-4 d-flex justify-content-start align-items-center">
			<label><b>पत्ता :	 </b></label>
			<label class="ml-2"><span id="vendorAddress">पत्ता </span></label>
		</div>
		<div class="col-md-4 d-flex justify-content-start align-items-center">
			<label><b>मोबाइल:	</b> </label>
			<label class="ml-2"><span id="vendorMobile">मोबाइल</span></label>
		</div>
		<div class="col-md-4 d-flex justify-content-start align-items-center">
			<label><b>आर. एस. टी. क्र:	</b> </label>
			<label class="ml-2"><span id="rstNo">आर. एस. टी. क्र:</span></label>
		</div>
	</div>
	
	<div class="row remove-row-margin row-background" style="min-height:300px;">
		<div class="col-md-12">
			<table class="table table-sm table-bordered">
				<thead>
					<tr>
						<th>कापसाचे एकूण वजन </th>
						<th>आजचा भाव </th>
						<th>भाव फरक </th>
						<th>पक्का भाव </th>
						<th>एकूण किम्मत </th>
					</tr>
				</thead>
				<tbody id="tableBody">
				</tbody>
				<tfoot>
					<tr>
						<td colspan="3"></td>
						<td>एकूण रक्कम </td>
						<td id="totalAmount"></td>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
	
	
	<div class="row remove-row-margin row-background">
		<div class="col-md-12">
			<label><b>सूचना</b> </label>
		</div>
		<div class="col-md-12">
			<ul>
				<li>आजच्या भावत फरक असून तो भविष्यात मिळणाऱ्या भावातून कमी करण्यात येईल. </li>
				<li>अमानत तोड़त्यावेळी अमानतीची पावती व् काटापट्टी सोबत आणणे आवश्यक आहे.</li>
				<li>अमानती मधे कापुस स्वतःच्या मर्ज़िने ठेवत आहे, या व्यवहारात बाजार समिती जबाबदार राहणार नहीं. </li>
				<li>अमानत तोडल्यानंतर १५ दिवसांच्या आत R.T.G.S.  करण्यात येईल. </li>
			</ul>
		</div>
	</div>
	
	<div class="row remove-row-margin row-background">
		<div class="col-md-12 text-right">
			<h6>शेतकऱ्यांची स्वाक्षरी </h6>
		</div>
	</div>
	
	<div class="row remove-row-margin row-background">
		<div class="col-md-3 align-middle">
			<h6>शेतकऱ्यांची स्वाक्षरी/अंगठा </h6>
		</div>
		<div class="col-md-3">
			<div class="sign-box"></div>
		</div>
		<div class="col-md-3">
			<div class="sign-box"></div>
		</div>
		<div class="col-md-3 align-middle">
			<h6>अधिकृत स्वाक्षरी </h6>
		</div>
	</div>
	
	</div>
</div>
	<script src="../js/3.4.1-jq.js"></script>
	<script src="../js/popper.min.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/plugins/jquery.blockUI.js" ></script>
<script>	
	window.onload = function(){
		var params = parseURLParams(window.location.href);
		sendReqToGetData(params.rstNo[0]);
	}
	
	function parseURLParams(url) {
	    var queryStart = url.indexOf("?") + 1,
	        queryEnd   = url.indexOf("#") + 1 || url.length + 1,
	        query = url.slice(queryStart, queryEnd - 1),
	        pairs = query.replace(/\+/g, " ").split("&"),
	        parms = {}, i, n, v, nv;
	
	    if (query === url || query === "") return;
	
	    for (i = 0; i < pairs.length; i++) {
	        nv = pairs[i].split("=", 2);
	        n = decodeURIComponent(nv[0]);
	        v = decodeURIComponent(nv[1]);
	
	        if (!parms.hasOwnProperty(n)) parms[n] = [];
	        parms[n].push(nv.length === 2 ? v : null);
	    }
	    return parms;
	}
	
	function sendReqToGetData(rstNo){
		$.blockUI();
		var url = "../processing/getAmanatDataForPrinting.jsp?rstNo="+rstNo;
		if(window.XMLHttpRequest){  
			fetchReq=new XMLHttpRequest();  
		}  
		else if(window.ActiveXObject){  
			fetchReq=new ActiveXObject("Microsoft.XMLHTTP");  
		}  
		try{  
			fetchReq.onreadystatechange=getAmanatData;  
			console.log("AJAX Req sent");
			fetchReq.open("GET",url,true);  
			fetchReq.send();  
		}catch(e){alert("Unable to connect to server");}
	}
	
	function getAmanatData(){
		if(fetchReq.readyState == 4){
			$.unblockUI();
			var response = this.response.trim();
			setData(response);
		}
	}
	
	function setData(data){
		var jsonArr = JSON.parse(data);
		
		document.getElementById('amanatDate').innerHTML = jsonArr[0].amanatDate;
		document.getElementById('vendorName').innerHTML = jsonArr[0].name;
		document.getElementById('vendorAddress').innerHTML = jsonArr[0].address;
		document.getElementById('vendorMobile').innerHTML = jsonArr[0].mobile;
		document.getElementById('rstNo').innerHTML = jsonArr[0].rst;
		
		var table = document.getElementById('tableBody');
		var totalAmount = 0;
		for(i = 0; i<jsonArr.length; i++){
			noOfRows = table.rows.length;
			var row = table.insertRow(noOfRows);
			var cell1 = row.insertCell(0);
			var cell2 = row.insertCell(1);
			var cell3 = row.insertCell(2);
			var cell4 = row.insertCell(3);
			var cell5 = row.insertCell(4);
			
			cell1.innerHTML = jsonArr[i].quantity;
			cell2.innerHTML = jsonArr[i].superRate;
			cell3.innerHTML = jsonArr[i].differenceFromSuper;
			cell4.innerHTML = jsonArr[i].superRate - jsonArr[i].differenceFromSuper;
			cell5.innerHTML = (jsonArr[i].quantity/100) * (jsonArr[i].superRate - jsonArr[i].differenceFromSuper);
			
			totalAmount = totalAmount + Number((jsonArr[i].quantity/100) * (jsonArr[i].superRate - jsonArr[i].differenceFromSuper))

		}
		document.getElementById('totalAmount').innerHTML = totalAmount;
	}
	
</script>	
</body>
</html>